<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sala da Noiva – MEM2026</title>

    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;500;600&family=Playfair+Display:wght@400;500;600&family=EB+Garamond:ital,wght@0,400..800;1,400..800&display=swap" rel="stylesheet">

    <link rel="stylesheet" href="css/mem2026.css">

    <style>
        body.sala {
            background: url('assets/rosa-textura-rosa.png') center center repeat fixed;
            background-size: cover;
        }

        .noiva-section {
            max-width: 850px;
            margin: 60px auto;
            padding: 20px;
        }

        .noiva-card {
            background: #ffffffdd;
            padding: 25px;
            border-radius: 18px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.12);
        }

        .galeria-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
            gap: 18px;
            margin-top: 20px;
        }

        .galeria-grid img {
            width: 100%;
            border-radius: 12px;
            box-shadow: 0 4px 12px rgba(0,0,0,0.15);
        }

        .mensagem-card {
            background: white;
            padding: 18px;
            border-radius: 14px;
            margin-bottom: 14px;
        }

        .timeline-item {
            background: white;
            padding: 14px;
            border-radius: 12px;
            margin-bottom: 12px;
            border-left: 4px solid #c38ca5;
        }

        audio, video {
            width: 100%;
            margin-top: 12px;
            border-radius: 12px;
        }
    </style>
</head>

<body class="sala">

    <!-- HERO -->
    <section class="noiva-hero fade-in" style="text-align:center; padding:60px 20px;">
        <h1 id="heroTitulo" class="noiva-hero-title">Carregando...</h1>
        <p id="heroSubtitulo" class="noiva-hero-sub">Aguarde...</p>
    </section>

    <!-- CARTA ESPECIAL -->
    <section class="noiva-section fade-up">
        <h2 class="noiva-title">Uma Carta Para Você</h2>
        <div class="noiva-card">
            <p id="cartaEspecial">Carregando sua carta, MaiLov...</p>
        </div>
    </section>

    <!-- MENSAGENS DO NOIVO -->
    <section class="noiva-section fade-up">
        <h2 class="noiva-title">Mensagens do Noivo</h2>
        <div id="mensagensContainer"></div>
    </section>

    <!-- GALERIA PRIVADA -->
    <section class="noiva-section fade-up">
        <h2 class="noiva-title">Nossa Galeria</h2>
        <div id="galeriaContainer" class="galeria-grid"></div>
    </section>

    <!-- LINHA DO TEMPO -->
    <section class="noiva-section fade-up">
        <h2 class="noiva-title">Nossa História</h2>
        <div id="timelineContainer"></div>
    </section>

    <!-- SURPRESAS -->
    <section class="noiva-section fade-up">
        <h2 class="noiva-title">Surpresas</h2>

        <div class="noiva-card">
            <h3>Carta Especial</h3>
            <p id="surpresaCarta">Carregando...</p>
        </div>

        <div id="surpresaAudioBox"></div>
        <div id="surpresaVideoBox"></div>
    </section>

    <!-- FRASE FINAL -->
    <section class="noiva-section fade-up" style="text-align:center;">
        <p id="fraseFinal" style="font-size:1.4rem; color:#4b2d36;">Carregando...</p>
    </section>

    <!-- FIREBASE LOADER -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-app.js";
        import {
            getFirestore, doc, getDoc, collection, getDocs
        } from "https://www.gstatic.com/firebasejs/12.6.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyCTet1E68tHv4bkYo27EVkwW8y1GvRjb4U",
            authDomain: "mem2026-bfd73.firebaseapp.com",
            projectId: "mem2026-bfd73",
            storageBucket: "mem2026-bfd73.firebasestorage.app",
            messagingSenderId: "677143363652",
            appId: "1:677143363652:web:4cf76964c39e102804fc11"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app);


        /* ---------------------------
           HERO
        --------------------------- */
        async function carregarHero() {
            const snap = await getDoc(doc(db, "noiva_conteudo", "hero"));
            if (snap.exists()) {
                const d = snap.data();
                document.getElementById("heroTitulo").innerHTML = d.titulo;
                document.getElementById("heroSubtitulo").innerHTML = d.subtitulo;
            }
        }


        /* ---------------------------
           CARTA
        --------------------------- */
        async function carregarCarta() {
            const snap = await getDoc(doc(db, "noiva_conteudo", "carta"));
            if (snap.exists()) {
                document.getElementById("cartaEspecial").innerHTML = snap.data().texto;
            }
        }


        /* ---------------------------
           MENSAGENS DO NOIVO
        --------------------------- */
        async function carregarMensagens() {
            const container = document.getElementById("mensagensContainer");
            container.innerHTML = "";

            const ref = collection(db, "noiva_conteudo", "mensagens", "itens");
            const snap = await getDocs(ref);

            snap.forEach(item => {
                const div = document.createElement("div");
                div.className = "mensagem-card";
                div.innerHTML = item.data().texto;
                container.appendChild(div);
            });
        }


        /* ---------------------------
           GALERIA
        --------------------------- */
        async function carregarGaleria() {
            const container = document.getElementById("galeriaContainer");
            container.innerHTML = "";

            const ref = collection(db, "noiva_conteudo", "galeria", "fotos");
            const snap = await getDocs(ref);

            snap.forEach(item => {
                const img = document.createElement("img");
                img.src = item.data().url;
                container.appendChild(img);
            });
        }


        /* ---------------------------
           LINHA DO TEMPO
        --------------------------- */
        async function carregarTimeline() {
            const container = document.getElementById("timelineContainer");
            container.innerHTML = "";

            const ref = collection(db, "noiva_conteudo", "timeline", "anos");
            const snap = await getDocs(ref);

            snap.forEach(item => {
                const div = document.createElement("div");
                div.className = "timeline-item";

                div.innerHTML = `<strong>${item.data().ano}</strong> — ${item.data().texto}`;

                container.appendChild(div);
            });
        }


        /* ---------------------------
           SURPRESAS
        --------------------------- */
        async function carregarSurpresas() {
            const snap = await getDoc(doc(db, "noiva_conteudo", "surpresas"));

            if (snap.exists()) {
                const d = snap.data();

                // carta
                document.getElementById("surpresaCarta").innerHTML = d.carta || "";

                // áudio
                if (d.audio) {
                    document.getElementById("surpresaAudioBox").innerHTML =
                        `<audio controls src="${d.audio}"></audio>`;
                }

                // vídeo
                if (d.video) {
                    document.getElementById("surpresaVideoBox").innerHTML =
                        `<video controls src="${d.video}"></video>`;
                }
            }
        }


        /* ---------------------------
           FRASE FINAL
        --------------------------- */
        async function carregarFraseFinal() {
            const snap = await getDoc(doc(db, "noiva_conteudo", "fraseFinal"));
            if (snap.exists()) {
                document.getElementById("fraseFinal").innerHTML = snap.data().texto;
            }
        }


        /* ---------------------------
           INICIALIZAÇÃO
        --------------------------- */
        async function carregarTudo() {
            await carregarHero();
            await carregarCarta();
            await carregarMensagens();
            await carregarGaleria();
            await carregarTimeline();
            await carregarSurpresas();
            await carregarFraseFinal();
        }

        carregarTudo();
    </script>

</body>
</html>

